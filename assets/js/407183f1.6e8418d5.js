"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[75],{4396:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var s=t(1085),r=t(1184),a=t(9256);const o=t.p+"assets/medias/imperative-scroll-1fe34da2ae37e95b962bff0dfb7eab50.mp4",i={sidebar_position:4},d="Tips and Tricks",l={id:"fundamentals/tips-and-tricks",title:"Tips and Tricks",description:"Exploring the libary and props",source:"@site/docs/fundamentals/tips-and-tricks.mdx",sourceDirName:"fundamentals",slug:"/fundamentals/tips-and-tricks",permalink:"/flash-calendar/fundamentals/tips-and-tricks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"defaultSidebar",previous:{title:"Customization",permalink:"/flash-calendar/fundamentals/customization"},next:{title:"Limitations",permalink:"/flash-calendar/fundamentals/limitations"}},c={},h=[{value:"Exploring the libary and props",id:"exploring-the-libary-and-props",level:2},{value:"Date IDs vs Dates",id:"date-ids-vs-dates",level:2},{value:"Programmatically scrolling to a date",id:"programmatically-scrolling-to-a-date",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"<code>FlashList&#39;s rendered size is not usable.</code>",id:"flashlists-rendered-size-is-not-usable",level:4},{value:"<code>ReferenceError: Can&#39;t find variable: Intl</code> (Android)",id:"referenceerror-cant-find-variable-intl-android",level:4}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"tips-and-tricks",children:"Tips and Tricks"}),"\n",(0,s.jsx)(n.h2,{id:"exploring-the-libary-and-props",children:"Exploring the libary and props"}),"\n",(0,s.jsxs)(n.p,{children:["All props from Flash Calendar are documented and prefixed with ",(0,s.jsx)(n.code,{children:"calendar"})," to\nincrease IDE discoverability. After installing the package, just type ",(0,s.jsx)(n.code,{children:"<Calendar calendar"})," and open your autocomplete to see the available options."]}),"\n",(0,s.jsx)(n.h2,{id:"date-ids-vs-dates",children:"Date IDs vs Dates"}),"\n",(0,s.jsxs)(n.p,{children:["Date and timezones are a confusing topic. This is why Flash Calendar is careful to name things consistently. All props and callbacks used by the library follows the same convention of using a date ID instead of a ",(0,s.jsx)(n.code,{children:"Date"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Date ID is a simple ",(0,s.jsx)(n.code,{children:"YYYY-MM-DD"})," representation of a given date. Flash Calendar exposes two functions to convert between Date and Date ID."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { toDateId, fromDateId } from "@marceloterreiro/flash-calendar";\n\nconst januaryFirstAsDate = fromDateId("2024-01-01"); // Date object\nconst januaryFirstAsId = toDateId(januaryFirstAsDate); // "2024-01-01"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["It's ",(0,s.jsxs)(n.strong,{children:["highly recommended to use ",(0,s.jsx)(n.code,{children:"toDateId"})," and ",(0,s.jsx)(n.code,{children:"fromDateId"})," when interacting with the library"]}),". These functions were purposefully created to avoid timezones and other date-related issues."]}),"\n",(0,s.jsx)(n.p,{children:"For instance, consider this code:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'const endOfJanuary = new Date("2024-01-31");\n\n// \u274c Don\'t do this, for some dates and timezones, this will return unexpected results\nconst endOfJanuaryId = endOfJanuary.toISOString().slice(0, 10); // 2024-02-01 or 2024-01-31, depending on the timezone\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The code above is not completely safe. It can return ",(0,s.jsx)(n.code,{children:"2024-02-01"})," for some timezones. Instead, use ",(0,s.jsx)(n.code,{children:"toDateId"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'const endOfJanuaryId = toDateId("2024-01-31");\nconst endOfJanuary = fromDateId(endOfJanuaryId); // Date object\n'})}),"\n",(0,s.jsxs)(n.p,{children:["These two convertions functions were ",(0,s.jsx)(n.a,{href:"https://github.com/MarceloPrado/flash-calendar/blob/ee87cb1a695a42840f00f17bbaeb1a795a1e3ba0/packages/flash-calendar/src/helpers/dates.test.ts#L30-L130",children:"battle-tested"})," to return the expected results, regardless of the timezone."]}),"\n",(0,s.jsx)(n.h2,{id:"programmatically-scrolling-to-a-date",children:"Programmatically scrolling to a date"}),"\n",(0,s.jsxs)(n.p,{children:["Flash Calendar exposes a ",(0,s.jsx)(n.code,{children:"ref"})," that allows imperative scrolling to a desired date."]}),"\n",(0,s.jsxs)(a.z,{spacing:24,alignItems:"flex-start",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { addMonths, subMonths, startOfMonth } from "date-fns";\nimport type { CalendarListRef } from "@marceloterreiro/flash-calendar";\nimport { Calendar, toDateId } from "@marceloterreiro/flash-calendar";\nimport { useRef, useState } from "react";\nimport { Button, Text, View } from "react-native";\n\nexport function ImperativeScrolling() {\n  const [currentMonth, setCurrentMonth] = useState(startOfMonth(new Date()));\n\n  const ref = useRef<CalendarListRef>(null);\n\n  return (\n    <View style={{ paddingTop: 20, flex: 1 }}>\n      <View style={{ flexDirection: "row", gap: 12 }}>\n        <Button\n          onPress={() => {\n            const pastMonth = subMonths(currentMonth, 1);\n            setCurrentMonth(pastMonth);\n            ref.current?.scrollToDate(pastMonth, true);\n          }}\n          title="Past month"\n        />\n        <Text>Current: {toDateId(currentMonth)}</Text>\n        <Button\n          onPress={() => {\n            const nextMonth = addMonths(currentMonth, 1);\n            setCurrentMonth(nextMonth);\n            ref.current?.scrollToDate(nextMonth, true);\n          }}\n          title="Next month"\n        />\n      </View>\n      <View style={{ flex: 1, width: "100%" }}>\n        <Calendar.List\n          calendarInitialMonthId={toDateId(currentMonth)}\n          onCalendarDayPress={(dateId) => console.log(`Pressed ${dateId}`)}\n          ref={ref}\n        />\n      </View>\n    </View>\n  );\n}\n'})})}),(0,s.jsx)("video",{controls:!0,width:250,children:(0,s.jsx)("source",{src:o,type:"video/mp4"})})]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:"Here are the most common issues and a guide on how to fix them."}),"\n",(0,s.jsx)(n.h4,{id:"flashlists-rendered-size-is-not-usable",children:(0,s.jsx)(n.code,{children:"FlashList's rendered size is not usable."})}),"\n",(0,s.jsxs)(n.p,{children:["Check out ",(0,s.jsx)(n.a,{href:"https://shopify.github.io/flash-list/docs/known-issues/#1-flashlists-rendered-size-is-not-usable-warning",children:"Flash List docs"})," for instructions on how to fix this warning."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"TLDR"}),": ensure the parent of ",(0,s.jsx)(n.code,{children:"<Calendar.List />"})," has a fixed height or a ",(0,s.jsx)(n.code,{children:"flex: 1"})," style."]}),"\n",(0,s.jsxs)(n.h4,{id:"referenceerror-cant-find-variable-intl-android",children:[(0,s.jsx)(n.code,{children:"ReferenceError: Can't find variable: Intl"})," (Android)"]}),"\n",(0,s.jsxs)(n.p,{children:["Flash Calendar uses ",(0,s.jsx)(n.code,{children:"Intl"})," primitives to format dates in a locale-aware way.\nJavaScriptCore (",(0,s.jsx)(n.code,{children:"jsc"}),"), the legacy React Native JS runtime, doesn't support ",(0,s.jsx)(n.code,{children:"Intl"})," out of the\nbox on Android."]}),"\n",(0,s.jsxs)(n.p,{children:["It's highly advised to upgrade to",(0,s.jsx)(n.code,{children:"Hermes"}),", the new default JS runtime (",(0,s.jsx)(n.a,{href:"https://reactnative.dev/docs/hermes",children:"more on that"}),"). Besides better performance, it also supports the ",(0,s.jsx)(n.code,{children:"Intl"})," primitives Flash Calendar uses. For Expo, update your ",(0,s.jsx)(n.code,{children:"app.json"})," to use ",(0,s.jsx)(n.code,{children:"hermes"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "expo": {\n    "jsEngine": "hermes"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If your company is stuck with ",(0,s.jsx)(n.code,{children:"jsc"}),", you can either use a polyfill, or bypass ",(0,s.jsx)(n.code,{children:"Intl"})," entirely by ",(0,s.jsx)(n.a,{href:"/fundamentals/usage#custom-date-formatting",children:"providing your own date formatting functions"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);